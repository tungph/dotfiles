#!/usr/bin/env bash

success() {
    # shellcheck disable=SC2059
    printf "\r\033[2K  [ \033[00;32mOK\033[0m ] $1\n"
}

fail() {
    # shellcheck disable=SC2059
    printf "\r\033[2K  [\033[0;31mFAIL\033[0m] $1\n"
    echo ''
    exit
}

set -e

echo ""
echo "> $1"

CMD="$HOME/.dotfiles/bin/installers/$1.sh"
if [ -f "$CMD" ]; then
    echo "Running $CMD"
    . "$CMD"
else
    sudo apt install -qqy "$1"
fi

[ $? -eq 0 ] && success $1 || fail $1
